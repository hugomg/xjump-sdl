#!/bin/sh

error() {
    echo >&2 "$1"
    exit 1
}

version=
datadir=
output=
for arg in "$@"; do
    value="${arg#*=}"
    case "$arg" in
        --version=*) version="$value";;
        --datadir=*) datadir="$value";;
        --output=*) output="$value";;
        *) error "Unrecognized option $arg";;
    esac
done

[ -n "$version" ] || error "--version is required"
[ -n "$datadir" ] || error "--datadir is required"
[ -n "$output" ]  || error "--output is required"

cat > "$output" <<EOF
// This file was automatically generated by \`make\'.
// Do not edit it by hand'
#define XJUMP_VERSION "$version"
#define XJUMP_DATADIR "$datadir"
EOF
