#!/bin/sh
# Script for recompiling and running xjump in a single command.
# Intended for development

if ! [ -e config.mk ]; then
    echo >&2 "Please run ./configure first"
    exit 1
fi

bindir=$(grep '^bindir *=' config.mk | sed 's/[^=]*= *//')
if [ -z "$bindir" ]; then
    echo >&2 "Something is wrong. I can't infer the bindir..."
    exit 1
fi

make || exit $?
make install > /dev/null || exit $?
"$bindir"/xjump "$@"
